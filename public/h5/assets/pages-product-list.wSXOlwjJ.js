import{r as t,u as a,v as e,o as s,a as o,b as l,j as i,f as n,w as r,F as d,g as c,d as u,s as p,i as m,e as f,k as g,h,t as x,c as _,l as y,m as w}from"./index-sKFDI-wa.js";import{_ as b,a as k}from"./uni-row.BiuaX5nq.js";import{_ as v}from"./标题装饰.S1UE32RW.js";import{S as $}from"./SwiperComponent.q5psLpg_.js";const j={__name:"list",setup(j,{expose:C}){const S=async t=>{try{const a=`${c().globalData.http_api}s=product&&catid=${t}&c=search&api_call_function=module_list`;console.log(`获取 catid 为 ${t} 的产品列表的数据地址:`,a);const{data:e}=await u({url:a,method:"GET"});return console.log(`接口返回的完整 catid 为 ${t} 的产品列表数据:`,e),e.data}catch(a){return p({title:`请求 catid 为 ${t} 的产品列表接口失败`,icon:"none",mask:!0}),console.error(`请求 catid 为 ${t} 的产品列表接口失败：`,a),[]}},F=t([{catid:null,title:null,productList:[]}]);a((t=>{const{id:a,name:s}=t;F.value[0].catid=a,F.value[0].title=decodeURIComponent(s),e({title:decodeURIComponent(s)})})),s((async()=>{for(const t of F.value)t.catid&&(t.productList=await S(t.catid))}));return C({onShareAppMessage:()=>({path:"/pages/product/list"}),onShareTimeline:()=>({query:""})}),(t,a)=>{const e=y,s=m,c=w,u=o(l("uni-col"),b),p=o(l("uni-row"),k);return f(),i(d,null,[n($),n(s,{class:"container"},{default:r((()=>[(f(!0),i(d,null,g(F.value,((t,a)=>(f(),i(d,{key:a},[n(s,{style:{display:"flex","align-items":"center",padding:"10rpx 10rpx 0 10rpx"}},{default:r((()=>[n(e,{src:v,style:{height:"21rpx",width:"auto"},mode:"heightFix"}),n(s,{style:{"margin-left":"10r","font-size":"31.25rpx"}},{default:r((()=>[h(x(t.title),1)])),_:2},1024)])),_:2},1024),n(s,null,{default:r((()=>[n(p,{style:{padding:"10rpx"},gutter:20},{default:r((()=>[(f(!0),i(d,null,g(t.productList,((t,a)=>(f(),_(u,{span:12,index:a,key:a},{default:r((()=>[n(c,{style:{display:"block","background-color":"#f9f9f9",padding:"8rpx"},url:`/pages/product/details?id=${t.id}`},{default:r((()=>[n(e,{src:t.thumb,style:{height:"auto",width:"100%"},mode:"widthFix",onClick:a=>{return e=t.thumb,void console.log("Show lightbox:",e);var e}},null,8,["src","onClick"]),n(s,{style:{"font-size":"18.75rpx","text-align":"center","margin-bottom":"20rpx"}},{default:r((()=>[h(x(t.title),1)])),_:2},1024)])),_:2},1032,["url"])])),_:2},1032,["index"])))),128))])),_:2},1024)])),_:2},1024)],64)))),128))])),_:1})],64)}}};export{j as default};
